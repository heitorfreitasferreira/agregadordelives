var googletag=googletag||{};googletag.cmd=googletag.cmd||[];var timeoutPrebidjs,pbjs=pbjs||{};pbjs.que=pbjs.que||[];var fixedTimeout,definedSlots={},refreshIntervals=[],refreshCount=0,refreshTime=0,adsDebug=-1!==window.location.search.indexOf("debug"),blockRefresh=-1!==window.location.search.indexOf("blockrefresh"),testAdapter=-1!==window.location.search.indexOf("test_adapter"),fixedAdsAllowed=!0,listeningRadio=!1,cookieDenied=!1,googletagEventsIsReady=!1,connectionType="unknown";setUserConnection();var prebidLabels=pbLabels();function clearRefreshIntervals(){for(var e in refreshIntervals)clearInterval(refreshIntervals[e]);refreshIntervals=[]}function clearPrebid(){refreshCount=[],refreshTime=[],clearRefreshIntervals(),clearTimeout(fixedTimeout),window.prebidAdUnits=window.prebidAdUnits||[],definedSlots={},pbjs.adserverRequestSent=!1,pbjs._winningBids=[],pbjs.adUnits=[],pbjs._bidsReceived=[],pbjs._adsReceived=[],pbjs._bidsRequested=[],pbjs._adUnitCodes=[],removeClass(document.body,"body-ad250")}function setupPageContextVariables(){cookieDenied=-1!==window.document.cookie.indexOf("letras_cookieconsent=deny"),listeningRadio=playaxRadioIsActive(),fixedAdsAllowed=isFixedAdsOnFooterAllowed()}function isFixedAdsOnFooterAllowed(){return!(!filterMediaQuery("(min-height: 400px) and (min-width: 320px)")||navigator&&navigator.userAgent.match(/iPhone/i)||window.__pageArgs&&"home"==window.__pageArgs.page||window.__pageArgs&&"blog_home"==window.__pageArgs.page||window.__pageArgs&&"genre"==window.__pageArgs.page)}function updateConnectionStatus(e){if(e)if(e.effectiveType)connectionType=e.effectiveType;else{switch(e.type){case"bluetooth":case"cellular":connectionType="3g";break;case"wifi":case"ethernet":case"wimax":case"mixed":connectionType="4g";break;case"none":case"unknown":case"other":default:connectionType="unknown"}adsDebug&&console.info("connection:",connectionType)}else connectionType="unknown"}function setUserConnection(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e&&(updateConnectionStatus(e),e.addEventListener("change",(function(){updateConnectionStatus(e)})))}function dinamicTimeout(e){var i=pbjs.bidderTimeout||1700;switch(connectionType){case"4g":case"3g":default:break;case"2g":i+=500;break;case"slow-2g":if(!e)return 0;i=2e3}return e&&(i+=300),i}function pbLabels(){var e=[];return-1!==document.cookie.indexOf("countryCode=BR")&&e.push("CCBR"),-1!==document.cookie.indexOf("countryCode=US")&&e.push("CCUS"),adsDebug&&console.info("labels for prebid: ",e),e}function teadsCondition(){return window.__IsMobile&&window.__pageArgs&&"lyric"==window.__pageArgs.page}function filterMediaQuery(e){return window.matchMedia&&window.matchMedia(e).matches}function setupPbjsEvents(){if(!teadsCondition())return!1;pbjs.onEvent("bidWon",(function e(i){if(i.bidder&&"teads"==i.bidder||i.bidderCode&&"teads"==i.bidderCode){adsDebug&&console.warn("teads","identified, setting specific timeout ",i),clearRefreshIntervals();var t=window._adunitRefreshSlots.pub_22_ad;window._adunitRefreshSlots.pub_22_ad=120,setRefreshBids(),window._adunitRefreshSlots.pub_22_ad=t}pbjs.offEvent("bidWon",e,"pub_22_ad")}),"pub_22_ad")}function displayAllowed(e){return!!("pub_22_ad_refresh"!=e&&"pub_22_ad"!=e&&"pub_26_ad_refresh"!=e&&"pub_26_ad"!=e||document.getElementById(e))&&!!("pub_18_ad"!=e&&"pub_18_ad_refresh"!=e&&"pub_34_ad"!=e&&"pub_34_ad_refresh"!=e&&"pub_35_ad"!=e&&"pub_35_ad_refresh"!=e&&"pub_25_ad"!=e&&"pub_25_ad_refresh"!=e||fixedAdsAllowed&&document.getElementById(e))}function dfpCall(){setGoogleTargeting(!1,0),cookieDenied&&googletag.pubads().setRequestNonPersonalizedAds(1),loadSlotsFirstView(window._adunitSlots)}function loadSlotsFirstView(e){var i=[],t=[];for(var n in e){var s=e[n];s.refresh||displayAllowed(n)&&(i.push(getSlotFromConfig(s)),t.push(s.div))}i.length>0&&(pbjs.que.push((function(){window.pbjs.setTargetingForGPTAsync(t),adsDebug&&(console.info("ad server targeting by slot"),console.info(pbjs.getAdserverTargeting()))})),googletag.pubads().refresh(i))}function adUnitDFPSlot(e){return e.indexOf("parceiros")>0?e:["","8348802"].concat([e]).join("/")}function dfpRefresh(){googletag.cmd.push((function(){dfpCall()}))}function initADPipeline(){if(clearPrebid(),googletag.cmd.push((function(){googletag.destroySlots(),googletag.pubads().enableSingleRequest(),googletag.pubads().disableInitialLoad(),window.__SafeFrameActive&&googletag.pubads().setForceSafeFrame(!0),googletag.enableServices(),googletag.pubads().clear(),googletag.pubads().setSafeFrameConfig({allowOverlayExpansion:!0,allowPushExpansion:!0,sandbox:!0})})),setupPageContextVariables(),setupSlotRenderEvents(),0===window.prebidAdUnits.length)return adsDebug&&console.info("calling dfp without prebid - no bids to request"),void dfpRefresh();var e=dinamicTimeout();if(adsDebug&&console.info("timeout:",e),0==e)return adsDebug&&console.info("calling dfp without prebid - 2g-slow connection"),void dfpRefresh();timeoutPrebidjs=setTimeout((function(){adsDebug&&console.info("calling dfp without prebid - prebid.js not load in 2s!"),dfpRefresh()}),2e3),pbjs.que.push((function(){clearTimeout(timeoutPrebidjs)})),filterBids(),configurePrebid(callHB)}function getShownBids(){for(var e=document.cookie.split(";"),i="",t=0;t<e.length;t++){for(var n=e[t];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf("shown_bids")){i=n.substring("shown_bids=".length,n.length);break}}return""!=i?i.split("-"):[]}function bidsCookieExists(){return-1!=document.cookie.indexOf("shown_bids")}function filterBids(){var e=[];if(testAdapter){if(adsDebug=!0,!bidsCookieExists())return;return filterBidsFirstView(e=getShownBids()),void filterBidsRefresh(e)}if(teadsCondition()){for(var i=0;i<window.__activeBids.length;i++)"teads"!=window.__activeBids[i]&&e.push(window.__activeBids[i]);filterBidsRefresh(e)}}function filterBidsFirstView(e){for(var i=window.prebidAdUnits,t=0;t<window.prebidAdUnits.length;t++){var n=window.prebidAdUnits[t].bids;i[t].bids=[];for(var s=0;s<n.length;s++)-1!==e.indexOf(n[s].bidder)&&i[t].bids.push(n[s])}window.prebidAdUnits=i}function filterBidsRefresh(e){for(var i=window.prebidAdUnitsRefresh,t=0;t<window.prebidAdUnitsRefresh.length;t++){var n=window.prebidAdUnitsRefresh[t].bids;i[t].bids=[];for(var s=0;s<n.length;s++)-1!==e.indexOf(n[s].bidder)&&i[t].bids.push(n[s])}window.prebidAdUnitsRefresh=i}function refreshBids(e){var i=function(i){refreshCount[i]||(refreshCount[i]=0),refreshTime[i]||(refreshTime[i]=0),adsDebug&&console.warn("set refresh slots in "+i+"s"),refreshIntervals.push(setInterval((function(){var t=e[i];if(t&&0!=t.length){var n=t.map((function(e){return e.div})),s=window.prebidAdUnitsRefresh.filter((function(e){return-1!==n.indexOf(e.code)}));refreshCount[i]++;var o=t.map((function(e){if(displayAllowed(e.div))return getSlotFromConfig(e)}));refreshTime[i]+=Number(i),pbjs.que.push((function(){callHBForRefresh(o,n,s,i)}))}}),1e3*i))};for(var t in e)i(t)}function getSlotFromConfig(e){var i;return ensureSlotsDivs(e),definedSlots[e.div]?definedSlots[e.div]:(i=e.outofpage?window.googletag.defineOutOfPageSlot(adUnitDFPSlot(e.ID),e.div).addService(googletag.pubads()):window.googletag.defineSlot(adUnitDFPSlot(e.ID),e.sizes,e.div).addService(googletag.pubads()),definedSlots[e.div]=i,definedSlots[e.div])}function ensureSlotsDivs(e){if(!document.getElementById(e.div)){var i=e.div.replace("_ad_refresh","").replace("_ad",""),t=document.getElementById(i);if(t){var n=document.createElement("div");n.id=i+"_ad";var s=document.createElement("div");s.id=i+"_ad_refresh",s.appendChild(n),t.appendChild(s)}}}function callHBForRefresh(e,i,t,n){var s=dinamicTimeout(!0);adsDebug&&(console.info("prebid timeout for refresh ",s),console.info("refreshing slots "+i)),pbjs.requestBids({timeout:s,adUnits:t,labels:prebidLabels,bidsBackHandler:function(){setGoogleTargeting(!0,n),pbjs.setTargetingForGPTAsync(i),adsDebug&&(console.info("ad server targeting by slot"),console.info(pbjs.getAdserverTargeting())),googletag.pubads().refresh(e)}})}function callHB(){pbjs.que.push((function(){var e=dinamicTimeout(),i=function(){adsDebug&&console.warn("calling dfp with prebid (bidsBackHandler)"),function(){if(pbjs.adserverRequestSent)return;pbjs.adserverRequestSent=!0,googletag.cmd.push((function(){dfpCall(),adsDebug&&console.warn("calling dfp"),setRefreshBids()}))}()};if(adsDebug&&(console.info("requesting bids:",window.prebidAdUnits.length),console.info("timeout:",e)),0==e)return adsDebug&&console.info("slow connection, call adserver without bids"),void i();pbjs.addAdUnits(window.prebidAdUnits),pbjs.requestBids({bidsBackHandler:i,labels:prebidLabels,timeout:e}),setupPbjsEvents()}))}function setRefreshBids(){if(!blockRefresh){var e={};for(var i in window._adunitRefreshSlots)if(window._adunitRefreshSlots.hasOwnProperty(i)){if(!displayAllowed(i))continue;var t=window._adunitRefreshSlots[i];void 0===e[t]&&(e[t]=[]),e[t].push(window._adunitSlots[i+"_refresh"])}refreshBids(e)}}function configurePrebid(e){var i=function(e,i){var t=i;if(i<=0)return i;switch(e.bidderCode){case"rubicon":i-=.2*i;break;case"smartadserver":i-=.18*i}return adsDebug&&i!=t&&console.info("apply price pressure:",e.bidder,t,i),i};window.__activeBids||(window.__activeBids=["criteo","rubicon","appnexus","aol","smartadserver","ix","rtbhouse","teads"]);for(var t=0;t<window.__activeBids.length;t++){var n=window.__activeBids[t];n&&(window.pbjs.bidderSettings=window.pbjs.bidderSettings||{},window.pbjs.bidderSettings[n]={bidCpmAdjustment:function(e,t){return i(t,e)}})}pbjs.que.push((function(){var i=dinamicTimeout();pbjs.setConfig({bidderTimeout:i,priceGranularity:{buckets:[{precision:2,max:49.99,increment:.01},{precision:2,max:100,increment:10}]},currency:{adServerCurrency:"BRL",defaultRates:{USD:{USD:1,BRL:4.1415681675,EUR:.9022827754,GBP:.8194802851,JPY:105.7294956239},GBP:{USD:1.2202856105,BRL:5.0538960395,EUR:1.1010426874,GBP:1,JPY:129.0201821125}},bidderCurrencyDefault:{teads:"BRL",criteo:"BRL",rubicon:"USD",appnexus:"USD",aol:"USD",smartadserver:"USD",ix:"USD",rtbhouse:"USD"}},userSync:{syncDelay:5e3,syncEnabled:!0,filterSettings:{iframe:{filter:"include",bidders:"*"}},syncsPerBidder:3},debug:adsDebug,enableSendAllBids:!0,coppa:!1,rubicon:{singleRequest:!0}}),pbjs.enableAnalytics({provider:"rubicon",options:{accountId:14458,endpoint:"https://prebid-a.rubiconproject.com/event",samplingFactor:10}}),pbjs.onEvent("bidWon",(function(e){adsDebug&&console.info(e.bidderCode+" won the ad server auction for ad unit "+e.adUnitCode+" at "+e.cpm+" CPM")})),pbjs.onEvent("auctionEnd",printBids),e()}))}function addClass(e,i){e.classList?e.classList.add(i):-1===e.className.indexOf(i)&&(e.className+=" "+i)}function removeClass(e,i){e.classList&&e.classList.contains(i)?e.classList.remove(i):-1===e.className.indexOf(i)&&(e.className=e.className.replace(i,""))}function isEventOfSlot(e,i){return-1!==e.slot.getAdUnitPath().indexOf(i)}function iframeHeightIs(e,i){if(!e||!e.slot||e.isEmpty||!e.slot.getSlotId())return!1;var t="google_ads_iframe_"+e.slot.getSlotId().getId(),n=document.getElementById(t);return n?n.getBoundingClientRect().height==i:(adsDebug&&console.warn("iframe not found: ",t),!1)}function withFixedHeight(e,i){var t=i.getAttribute("data-maxh");t||(t=0),t=parseInt(t,10),e.size&&e.size[1]>1&&e.size[1]>t&&(i.setAttribute("data-maxh",e.size[1]),i.style.height=e.size[1]+"px")}function setupSlotRenderEvents(){googletagEventsIsReady||googletag.cmd.push((function(){googletagEventsIsReady=!0,googletag.pubads().addEventListener("slotRenderEnded",renderEvents)}))}function renderEvents(e){var i,t=e.slot.getSlotElementId(),n=-1!==t.indexOf("_refresh"),s=document.getElementById(t);if(s){var o=s.parentElement;if(-1!==s.parentElement.id.indexOf("_refresh")&&(o=s.parentElement.parentElement),o){var a="true"===o.getAttribute("data-slotempty");if(n&&(!e.isEmpty||a)){var r=t.replace("_refresh",""),d=definedSlots[r];d&&(googletag.destroySlots([d]),definedSlots[r]=void 0)}if(adsDebug&&console.warn("slot render end:",e.slot.getAdUnitPath(),"is empty: ",e.isEmpty,"is backfill: ",e.isBackfill," Div: ",o.id),window.__IsMobile&&isEventOfSlot(e,"/8348802/Letras:destaques:capa"))"dest-ad"===o.id&&(i=document.getElementById("hfallback"),e.isEmpty?i?(i.style.display="block",o.remove()):o.style.display="none":(i&&i.remove(),o.style.display="block"));else if(isEventOfSlot(e,"/8348802/Letras:destaques:capa")&&"dest-an-1"===o.id)(i=document.getElementById("hfallback"))?(i.style.display="block",s.style.display="none"):o.style.display="none";else if(isEventOfSlot(e,"/8348802/LetrasMobile:footer:fixed")||isEventOfSlot(e,"/8348802/LetrasBlogMobile:footer:fixed")||isEventOfSlot(e,"/8348802/LetrasBlogDesktop:footer:fixed")||isEventOfSlot(e,"/8348802/LetrasDesktop:footer:fixed"))e.isEmpty?a&&(removeClass(document.body,"body-an-fixed"),removeClass(o,"an-fixed"),removeCloseButton(o)):(addClass(document.body,"body-an-fixed"),addClass(o,"an-fixed"),addCloseButton(o));else if(!e.isEmpty&&isEventOfSlot(e,"/8348802/LetrasMobile:meioletra")||isEventOfSlot(e,"/8348802/LetrasMobile:meioletra2")){if(!o.querySelector(".an-disclaimer")){var l=document.createElement("b");l.className="an-disclaimer",l.innerText=getDisclaimerText(),o.insertBefore(l,o.firstChild)}addClass(o,"g-sp"),addClass(o,"an-square"),withFixedHeight(e,o)}else if(e.isEmpty||!isEventOfSlot(e,"/8348802/LetrasMobile:top")&&!isEventOfSlot(e,"/8348802/LetrasBlogMobile:top"))(isEventOfSlot(e,"/8348802/Letras:728x90:firstView")||isEventOfSlot(e,"/8348802/LetrasBlogDesktop:970x90:internas"))&&((e.isBackfill&&e.size&&250==e.size[1]||e.size&&1==e.size[1]&&iframeHeightIs(e,250))&&addClass(document.body,"body-ad250"),n||e.isEmpty||"home"==window.__pageArgs.page||"genre"==window.__pageArgs.page||window._omq.push(["ui/sticky_ad"]));else if("lyric"!=window.__pageArgs.page&&"translation"!=window.__pageArgs.page||withFixedHeight(e,o),!n&&!e.isEmpty&&"home"!=window.__pageArgs.page&&"genre"!=window.__pageArgs.page){var c=document.querySelector(".an-top");if(!c)return;addClass(c,"is-sticky");var g=function e(){removeClass(c,"is-hidden"),removeClass(c,"is-sticky"),c.removeEventListener("transitionend",e,!1)};fixedTimeout=setTimeout((function(){window.pageYOffset>100?(c.addEventListener("transitionend",g),addClass(c,"is-hidden")):removeClass(c,"is-sticky")}),5e3)}if(e.isEmpty){if(!a)return;if(o.setAttribute("data-slotempty","true"),isEventOfSlot(e,"/8348802/LetrasMobile:top")||isEventOfSlot(e,"/8348802/LetrasBlogMobile:top")||isEventOfSlot(e,"/8348802/LetrasMobile:meioletra")||isEventOfSlot(e,"/8348802/LetrasMobile:meioletra2")||isEventOfSlot(e,"/8348802/Letras:destaques:capa")||isEventOfSlot(e,"/8348802/Letras:728x90:firstView"))return!1;o.style.display="none"}else o.setAttribute("data-slotempty","false"),o.style.display="block"}}}function pageVisibility(){return"visible"===document.visibilityState?"1":"0"}function setGoogleTargeting(e,i){var t=function(e,i){adsDebug&&console.warn("setTargeting",e,i),googletag.pubads().setTargeting(e,i)};if(googletag.pubads().clearTargeting(),t("platform",window.__IsMobile?"mobile":"desktop"),t("reload",e?"1":"0"),refreshCount[i]&&t("refresh_count",refreshCount[i]+""),refreshTime[i]&&t("refresh_time",refreshTime[i]+""),t("connection",connectionType),t("page_visibility",pageVisibility()),t("locale",window.__Locale),t("idioma",window.__Region),window.__SafeFrameActive&&t("safe_frame",window.__SafeFrameActive?"1":"0"),window.__pageArgs.page&&t("page",window.__pageArgs.page),window.__pageArgs.action&&t("action",window.__pageArgs.action),window.__pageArgs.dns&&t("artista",window.__pageArgs.dns),window.__pageArgs.url&&t("musica_url",window.__pageArgs.url),window.__pageArgs.lyric_lang&&t("lyric_lang",window.__pageArgs.lyric_lang),window.__pageArgs.genre&&t("genero",window.__pageArgs.genre),window.__Hash&&t("playlist",window.__Hash),listeningRadio&&t("listening_radio","1"),window.disabledAdsense&&t("blacklist","1"),configureRubiconDinamicParams(),window._ttprofiles||window._ttqtt_terra){var n=window._ttprofiles||window._ttqtt_terra;if(null==n.getAge)return;t("age",n.getAge),t("gender",n.getGender),t("cluster",n.getProfiles),t("subjects",n.getSubjects),t("team",n.getTeam),t("microsegments",n.getMicrosegments),t("socialclass",n.getSocialClass),t("city",n.getCity),t("state",n.getState)}}function configureRubiconDinamicParams(){for(var e=0;e<window.prebidAdUnits.length;e++)for(var i=window.prebidAdUnits[e].bids,t=0;t<i.length;t++)if("rubicon"==i[t].bidder){i[t].params=i[t].params||{},i[t].params.inventory={page:window.__pageArgs.page||"",action:window.__pageArgs.action||"",artista:window.__pageArgs.dns||"",musica_url:window.__pageArgs.url||"",lyric_lang:window.__pageArgs.lyric_lang||"",idioma:window.__Region||"",locale:window.__Locale||"",playlist:window.__Hash||"",genero:window.__pageArgs.genre||""};var n=window._ttprofiles||window._ttqtt_terra;if(!n||void 0===n.getAge)continue;i[t].params.visitor={age:n.getAge||"",gender:n.getGender||"",cluster:n.getProfiles||"",subjects:n.getSubjects||"",team:n.getTeam||"",socialclass:n.getSocialClass||"",microsegments:n.getMicrosegments||"",city:n.getCity||"",state:n.getState||""}}}function playaxRadioIsActive(){var e=!1,i=-1!==window.location.hash.toString().indexOf("radios:")||-1!==window.location.pathname.toString().indexOf("/radios/"),t=document.getElementById("player-radio");return t&&(e=-1!==t.className.indexOf("pl-radio-active")&&window.__pageArgs&&"lyric"!==window.__pageArgs.page),i||e}function printBids(){if(adsDebug){var e=pbjs.getBidResponses(),i=pbjs.getAllWinningBids(),t=[];if(Object.keys(e).forEach((function(n){e[n].bids.forEach((function(e){t.push({bid:e,adunit:n,adId:e.adId,bidder:e.bidder,time:e.timeToRespond,cpm:e.cpm,msg:e.statusMessage,rendered:!!i.find((function(i){return i.adId==e.adId}))})}))})),t.length)if(console.table)console.table(t);else for(var n=0;n<t.length;n++)console.info(t[n]);else console.warn("NO prebid responses")}}function HSCMD(e){for(var i=0;i<e.length;i++)this.push.call(null,e[i])}function addCloseButton(e){if(!e.querySelector(".an-fixed-close")){var i=document.createElement("button");i.innerText="close",i.classList.add("an-fixed-close"),i.addEventListener("click",(function(){removeClass(document.body,"body-an-fixed"),e.remove()})),e.appendChild(i)}}function removeCloseButton(e){var i=e.querySelector(".an-fixed-close");i&&i.remove()}function getDisclaimerText(){switch(window.__Locale){case"en_US":return"More below the ad";case"es_ES":return"Continúa después del anuncio";default:return"Continua depois do anúncio"}}HSCMD.prototype.push=function(e){e()},window._hscmd=new HSCMD(window._hscmd||[]);